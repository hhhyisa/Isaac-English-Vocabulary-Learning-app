<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LingoFlash AI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body class="bg-slate-50 min-h-screen flex items-center justify-center p-4">

  <div class="bg-white p-8 rounded-2xl shadow-xl max-w-md w-full border border-slate-100">
    <div class="text-center space-y-2 mb-8">
      <h1 class="text-4xl font-extrabold text-indigo-600 tracking-tight">LingoFlash âš¡ï¸</h1>
      <p class="text-slate-400 text-sm">ç”± Gemini Pro æä¾›æ™ºåŠ›æ”¯æŒ</p>
    </div>

    <div class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-slate-700 mb-1 ml-1">è¾“å…¥å•è¯æˆ–çŸ­è¯­</label>
        <input type="text" id="wordInput" placeholder="ä¾‹å¦‚: Serendipity" 
               class="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition text-slate-700 placeholder-slate-400">
      </div>

      <button onclick="generateContent()" id="generateBtn"
              class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3.5 px-4 rounded-xl transition transform active:scale-[0.98] shadow-lg shadow-indigo-200 flex items-center justify-center gap-2">
        <span>âœ¨ ç”Ÿæˆå•è¯å¡</span>
      </button>
    </div>

    <div id="resultArea" class="hidden mt-8 p-6 bg-indigo-50 rounded-xl border border-indigo-100 text-slate-700 leading-relaxed prose prose-indigo max-w-none">
      </div>
  </div>

  <script>
    // ğŸ”´ ğŸ”´ ğŸ”´ è¯·æŠŠä½ çš„ Key å¡«åœ¨å¼•å·é‡Œé¢ï¼ğŸ”´ ğŸ”´ ğŸ”´
    const API_KEY = "AIzaSyB8D5MbiI-kDKOmeo6xNLxAwzCMTW6gl5w"; 

    async function generateContent() {
      const input = document.getElementById('wordInput').value.trim();
      const resultBox = document.getElementById('resultArea');
      const btn = document.getElementById('generateBtn');
      
      if (!input) return alert("è¯·å…ˆè¾“å…¥ä¸€ä¸ªå•è¯ï¼");
      if (API_KEY.includes("åœ¨è¿™é‡Œå¡«å…¥")) return alert("å¸…å“¥ï¼Œä½ å¿˜å¡« API Key äº†ï¼è¯·å» index.html ä¿®æ”¹ä»£ç ã€‚");

      // UI å˜ä¸ºåŠ è½½çŠ¶æ€
      btn.disabled = true;
      btn.innerHTML = `<svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> æ€è€ƒä¸­...`;
      resultBox.classList.remove('hidden');
      resultBox.innerHTML = "<span class='text-gray-500'>æ­£åœ¨è¿æ¥ Gemini å¤§è„‘...</span>";

      try {
        // 1. æ„é€  Prompt (ä½ å¯ä»¥éšæ„ä¿®æ”¹è¿™é‡Œçš„æç¤ºè¯)
        const prompt = `
          è¯·ä½œä¸ºä¸€ä¸ªä¸“ä¸šçš„è‹±è¯­è€å¸ˆï¼Œä¸ºå•è¯ "${input}" åˆ¶ä½œä¸€å¼ å­¦ä¹ å¡ç‰‡ã€‚
          è¯·ç”¨ä¸­æ–‡å›ç­”ï¼Œæ ¼å¼è¦æ±‚å¦‚ä¸‹ï¼š
          1. **å•è¯éŸ³æ ‡**
          2. **ä¸­æ–‡é‡Šä¹‰** (ç®€æ˜æ‰¼è¦)
          3. **è®°å¿†æŠ€å·§** (è¯æ ¹è¯ç¼€æˆ–è°éŸ³ï¼Œæœ‰è¶£ä¸€ç‚¹)
          4. **åœ°é“ä¾‹å¥** (ä¸­è‹±å¯¹ç…§ï¼Œ1å¥å³å¯)
          5. **ç‘å£« VS ä¸­å›½å­¦ç”Ÿå¸¸çŠ¯é”™è¯¯** (ç®€çŸ­å¯¹æ¯”ï¼Œå¦‚æœæ²¡æœ‰å°±ä¸ç”¨å†™)
          è¯·ä½¿ç”¨ Markdown æ ¼å¼ï¼Œä¸è¦åºŸè¯ï¼Œç›´æ¥è¾“å‡ºå†…å®¹ã€‚
        `;

        // 2. å‘é€è¯·æ±‚ç»™ Google Gemini
        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${API_KEY}`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            contents: [{ parts: [{ text: prompt }] }]
          })
        });

        const data = await response.json();

        // 3. å¤„ç†ç»“æœ
        if (data.error) throw new Error(data.error.message);
        const aiText = data.candidates[0].content.parts[0].text;
        
        // 4. æ˜¾ç¤ºç»“æœ (ç”¨ marked åº“æŠŠ markdown å˜æ¼‚äº®)
        resultBox.innerHTML = marked.parse(aiText);

      } catch (error) {
        resultBox.innerHTML = `<div class="text-red-500 font-bold">ğŸ˜­ å‡ºé”™äº†: ${error.message}</div>`;
      } finally {
        // æ¢å¤æŒ‰é’®
        btn.disabled = false;
        btn.innerHTML = "âœ¨ ç”Ÿæˆå•è¯å¡";
      }
    }
  </script>
</body>
</html>
